    <!-- General Page Layout HTML -->
    <div class="header">
        <div class="title"><span data-i18n="Manage"></span> <span data-i18n="Attributes"></span></div>
        <div class="bread"><span data-i18n="ZitiNetwork"></span> <span class="secondary">/</span> <span data-i18n="Manage"></span> <span data-i18n="Attributes"></span></div>
        <div class="line"></div>
        <div class="tabs">
            <div class="tab selected"><span data-i18n="Manage"></span> <span data-i18n="Attributes"></span></div>
        </div>
    </div>
    <div class="action icon-plus" data-action="add"></div>
    <div class="filters">
        <input id="SearchFilter" data-defined="search" type="text" class="search" data-i18n="EnterFilter" />
        <div class="clear icon-clear" data-defined="clear"></div>
        <div class="searchButton icon-search"></div>
        <div class="counters"><span id="Start">-</span>-<span id="End">-</span> <span data-i18n="Of"></span> <span id="Total">-</span></div>
        <div class="navigate prev icon-prev disabled"></div>
        <div class="navigate next icon-next disabled"></div>
    </div>
    <div class="area data" data-defined="table">
        <div class="noitems"></div>
        <div class="table">
            <div class="head grid rows">
                <div class="col">
                    <div class="selector all"></div>
                </div>
                <div class="col sort asc" data-by="name" data-i18n="Name"><div class="dragger"></div></div>
                <div class="col sort asc" data-by="name" data-i18n="Identities"><div class="dragger"></div></div>
                <div class="col sort asc" data-by="name" data-i18n="Services"><div class="dragger"></div></div>
                <div class="col sort asc" data-by="name" data-i18n="Routers"><div class="dragger"></div></div>
                <div class="col sort asc" data-by="name" data-i18n="Posture Checks"><div class="dragger"></div></div>
                <div class="col"></div>
            </div>
            <div class="rows" data-defined="rows">
                <!-- This area will be replaced by data rows -->
            </div>
        </div>
    </div>
    <div class="nodata" data-defined="empty">
        <span data-i18n="No"></span> 
        <span data-i18n="Attributes"></span> 
        <span data-i18n="NoneDefined"></span> 
        <span data-i18n="Attributes"></span>.
    </div>



    <!-- Template HTML will be used to display rows of data -->
    <div id="RowTemplate" class="row grid rows template" data-defined="template">
        <div class="col">
            <div class="selector" data-id="{{id}}"></div>
        </div>
        <div class="col" data-id="{{id}}"><strong>{{name}}</strong></div>
        <div class="col desktop" data-id="{{id}}">{{name}}</div>
        <div class="col allowOver">
            <div class="dots" data-id="{{id}}">...
                <div class="gridMenu" data-id="{{id}}">
                    <div class="gridAction" data-id="{{id}}" data-action="edit" data-i18n="Edit"></div>
                    <div class="gridAction {{hiddenClass}}" data-id="{{id}}" data-action="verify" data-i18n="Verify"></div>
                    <div class="gridAction" data-id="{{id}}" data-action="delete" data-i18n="Delete"></div>
                </div>
            </div>
        </div>
    </div>

    <style>
        .grid.rows {
	        grid-template-columns: 50px auto 50px 50px 50px 50px 50px;
        }
    </style>

    <script language="javascript" type="text/javascript">
        page = {
            loading: 2,
            attributes: [],
            idRolesObj: null,
            serviceRolesObj: null,
            routerRolesObj: null,
            identitiesObject: null,
            serviceObject: null,
            postureObject: null,
            routerObject: null,
            attributes: [],
            init: function() {
                this.events();
                page.identitiesObject = new Data("identities");
                page.serviceObject = new Data("services");
                page.postureObject = new Data("posture-checks");
                page.routerObject = new Data("edge-routers");

                page.identitiesObject.init(true, false, true);
                page.serviceObject.init(false, false, true);
                page.postureObject.init(false, false, true);
                page.routerObject.init(false, false, true);

                page.idRolesObj = new Data("identity-role-attributes");
                page.idRolesObj.init(false, false, true);
                page.idRolesObj.paging.searchOn = "id";
                page.idRolesObj.paging.sort = "id";

                page.routerRolesObj = new Data("edge-router-role-attributes");
                page.routerRolesObj.init(false, false, true);
                page.routerRolesObj.paging.searchOn = "id";
                page.routerRolesObj.paging.sort = "id";

                page.serviceRolesObj = new Data("service-role-attributes");
                page.serviceRolesObj.init(false, false, true);
                page.serviceRolesObj.paging.searchOn = "id";
                page.serviceRolesObj.paging.sort = "id";
            }, 
            events: function() {
                context.addListener("identity-role-attributes", page.attributesLoaded);
                context.addListener("edge-router-role-attributes", page.attributesLoaded);
                context.addListener("service-role-attributes", page.attributesLoaded);
                context.addListener("identities", page.identitiesLoaded);
                context.addListener("services", page.servicesLoaded);
                context.addListener("posture-checks", page.postureLoaded);
                context.addListener("edge-routers", page.routerLoaded);
            },
            identitiesLoaded: function(e) {
                page.serviceObject.get();
            },
            servicesLoaded: function(e) {
                page.postureObject.get();
            },
            postureLoaded: function(e) {
                let items = e.data;
                for (let i=0; i<items.length; i++) {
                    let item = items[i];
                    if (item.roleAttributes) {
                        for (let j=0; j<item.roleAttributes.length; j++) {
                            let tag = item.roleAttributes[j];

                            let index = page.attributeIndex(tag);
                            if (index==-1) {
                                page.attributes.push({
                                    name: tag,
                                    identities: page.attrTotal(tag, page.identitiesObject.data),
                                    services: page.attrTotal(tag, page.serviceObject.data),
                                    postureChecks: 1,
                                    routers: page.attrTotal(tag, page.routerObject.data)
                                })
                            } else {
                                page.attributes[index].postureChecks++;
                            }

                        }
                    }
                }
                page.routerObject.get();
            },
            routerLoaded: function(e) {
                page.idRolesObj.get();
                page.serviceRolesObj.get();
                page.routerRolesObj.get();
            },
            attributesLoaded: function(e) {
                let items = e.data;
                for (let i=0; i<items.length; i++) {
                    let tag = items[i];
                    let index = page.attributeIndex(tag);
                    if (index==-1) {
                        page.attributes.push({
                            name: tag,
                            identities: page.attrTotal(tag, page.identitiesObject.data),
                            services: page.attrTotal(tag, page.serviceObject.data),
                            postureChecks: page.attrTotal(tag, page.postureObject.data),
                            routers: page.attrTotal(tag, page.routerObject.data)
                        })
                    } 
                }
                page.loading--;
                if (page.loading==0) {
                    
                }
            },
            attributeIndex: function(name) {
                for (let i=0; i<page.attributes.length; i++) {
                    if (page.attributes[i].name == name) return i;
                }
                return -1;
            },
            attrTotal: function(tag, items, showIt) {
                let total = 0;
                for (let i=0; i<items.length; i++) {
                    let item = items[i];
                    if (item.roleAttributes && item.roleAttributes.includes(tag)) total++;
                    if (showIt) console.log(tag+" "+total+" "+item.roleAttributes);
                }
                return total;
            }
        }
    </script>